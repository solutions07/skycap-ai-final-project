# Minimal test container for SkyCap AI
FROM python:3.9-slim

WORKDIR /app

# Install minimal dependencies
RUN pip install flask flask-cors gunicorn

# Create a minimal test app
RUN echo 'from flask import Flask, jsonify\n\
from flask_cors import CORS\n\
\n\
app = Flask(__name__)\n\
CORS(app)\n\
\n\
@app.route("/", methods=["GET"])\n\
def home():\n\
    return jsonify({"status": "SkyCap AI Test Service - Running!", "version": "1.0"})\n\
\n\
@app.route("/health", methods=["GET"])\n\
def health():\n\
    return jsonify({"status": "healthy"})\n\
\n\
if __name__ == "__main__":\n\
    import os\n\
    port = int(os.environ.get("PORT", 8080))\n\
    app.run(host="0.0.0.0", port=port)\n\
' > test_app.py

ENV PORT=8080
EXPOSE 8080

CMD exec gunicorn --bind :$PORT --workers 1 --threads 2 --timeout 0 test_app:app